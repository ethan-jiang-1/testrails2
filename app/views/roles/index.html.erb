<h3>Listing roles (ajax js)</h3>

<div>
  <div id='roles_dynamic' style="margin-left:10px">
  </div>
  <hr/>
  <%= link_to " Refresh Roles", roles_path, :class =>"btn icon-refresh", :remote => true, :id => "refresh-roles"  %>
  <!-- < %= link_to ' New Role', new_role_path , :class => 'btn icon-plus-sign', :remote => true % > -->


    <!-- Button to trigger modal -->
    <a href="#myModal" role="button" class="btn icon-plus-sign" data-toggle="modal"> New Role</a>

    <!-- Modal -->
    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
           <button id="new_role_name_close" type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
           <h3 id="myModalLabel">New Role</h3>
        </div>
        <div class="modal-body">
           <%=  form_tag '/roles', :remote => true, :method => :post %>
            <input id="new_role_name" type="text" name="role[name]" placeholder="name of new role"/>
            <br/>
            <button class="btn btn-inverse" type="submit" onclick="javascript: $('#new_role_name_close').click(); setTimeout('refresh_after_submit()',100);" >Add New</button>
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
           </form>
        </div>
        <script>
            function refresh_after_submit()
            {
                $('#refresh-roles').click()
            }
        </script>
    </div>
</div>
